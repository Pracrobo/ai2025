<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <h1>외부 서버로부터 데이터 가져오기</h1>
    <button id="loadContentBtn"> 정보 가져오기</button>
    <div id="result">
        <!-- 가져온 데이터 표시할 곳-->

    </div>
    
    <script>
        //const ret = fetch('https://jsonplaceholder.typicode.com/posts/1')
        //console.log(ret);// Promise 객체타입
        // //비동기 처리 : 기다리지 않고 끝나면 알려줘
        //pending 이따가 할거다
        // 200 요청 완료
        document.getElementById('loadContentBtn').addEventListener('click', function() => {
            fetch('https://jsonplaceholder.typicode.com/posts/2').then(response => {
                  //  console.log(response.status); //200
                   // console.log(response.ok); //성공 실패 여부 true/false
                    return response.json(); // Response 객체를 response 라는 변수에 담아서 왔는데 
                    // 그 변수 안에 있는 객체의 json이라는 함수를 통해서 실제 데이터로 변환
                }).then((data) => {
                  //  console.log(data);
                    // console.log(data.title);
                    const title = data.title;
                    const content = data.body;
    
                    //원하는 데이터를 받아다가 다시 우리 페이지에 랜더링
                    document.getElementById('result').innerHTML = `<p><strong>타이틀: </storng> ${title} </p>`+ `<p><strong>본문:</strong> ${content}</p>`
                }).catch((error) => {
                    //실패할때 에러 캐치
                    document.getElementById('result').innerHTML = `<p><strong>오류: </storng> 데이터를 가져오는데 실패했습니다. 오류 : ${error}{</p>`
                })
            //then이라는 함수 , 이벤트랑 비슷한 response
        })
    </script>
</body>
</html>