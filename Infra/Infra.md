# Infra 도구

## Terraform

- 개발자가 클라우드 IT 리소스를 자동으로 생성, 프로비저닝 및 관리하는 데 사용하는 코드형 인프라(IaC) 도구

- HashiCorp에서 만든 오픈 소스 "코드형 인프라" 도구인 Terraform을 사용하면 프로그래머가 인프라를 안전하고 효율적으로 구축, 변경 및 버전화할 수 있다.

- Terraform은 개발자가 HashiCorp 구성 언어(HCL)라는 고급 구성 언어를 사용하여 애플리케이션 실행에 필요한 “최종 상태” 클라우드 또는 온프레미스 인프라를 설명할 수 있도록 하는 선언적 코딩 도구입니다. 그런 다음 해당 최종 상태에 도달하기 위한 계획을 생성하고 인프라 프로비저닝 계획을 실행합니다.

- Terraform은 간단한 구문을 사용하고, 여러 클라우드 및 온프레미스 데이터 센터에 인프라를 프로비저닝하고, 구성 변경에 대응하여 인프라를 안전하고 효율적으로 다시 프로비저닝합니다. 이것이 바로 Terraform이 현재 가장 널리 사용되는 인프라 자동화 도구 중 하나인 이유입니다. 조직에서 하이브리드 클라우드 또는 멀티클라우드 환경을 배포할 계획이라면 Terraform에 대해 관심을 가지거나 알아야 할 필요가 있습니다.

### 코드형 인프라(IaC)의 이점

Terraform의 장점을 더 잘 이해하려면 먼저 코드형 인프라(IaC)의 이점을 이해하는 것이 좋습니다. IaC를 통해 개발자는 프로비저닝을 자동화하고, 더 빠르고, 반복 가능한 방식으로 인프라를 코드화할 수 있습니다. 이는 버전 제어, 지속적인 통합 및 지속적인 배포와 같은 애자일 및 DevOps 사례의 핵심 구성 요소입니다.

코드형 인프(IaC)는 다음과 같은 이점을 제공합니다.

1. 속도 향상: 리소스를 배포 또는 연결해야 할 때 자동화는 인터페이스를 수동으로 탐색하는 것보다 빠릅니다.

2. 안정성 향상: 인프라 규모가 크면 리소스를 잘못 구성하거나 잘못된 순서로 서비스를 프로비저닝하기 쉬워집니다. IaC를 사용하면 리소스가 항상 지정한 대로 정확하게 프로비저닝되고 구성됩니다.

3. 구성 드리프트 방지: 구성 드리프트는 환경을 프로비저닝한 구성이 실제 환경과 더 이상 일치하지 않을 때 발생합니다. ('불변 인프라' 참조)

4. 실험, 테스트 및 최적화 지원: 코드형 인프라를 사용하면 새 인프라를 훨씬 빠르고 쉽게 프로비저닝할 수 있으므로 많은 시간과 리소스를 투자하지 않고도 실험적으로 변경하고 테스트할 수 있으며, 결과가 마음에 들면 프로덕션을 위해 새 인프라를 빠르게 확장할 수 있습니다.

### Terraform의 이점

- 오픈 소스: Terraform은 플랫폼에 플러그인을 구축하는 대규모 기여자 커뮤니티의 지원을 받습니다. 어떤 클라우드 공급자를 사용하든 플러그인, 확장 프로그램 및 전문 지원을 쉽게 찾을 수 있습니다. 이는 또한 Terraform이 지속적으로 추가되는 새로운 이점과 개선 사항을 통해 빠르게 발전한다는 것을 의미합니다.

- 플랫폼에 구애받지 않음: 모든 클라우드 서비스 제공업체에서 사용할 수 있음을 의미합니다. 대부분의 다른 IaC 도구는 단일 클라우드 제공업체와 함께 작동하도록 설계되어 있습니다.

- 변경할 수 없는 인프라: 대부분의 코드형 인프라 도구는 변경 가능한 인프라를 생성하므로 미들웨어 업그레이드 또는 새 스토리지 서버와 같은 변경 사항을 수용하기 위해 인프라를 변경할 수 있습니다. 변경 가능한 인프라의 위험은 구성 드리프트입니다.즉, 변경 사항이 누적됨에 따라 다른 서버 또는 기타 인프라 요소의 실제 프로비저닝이 원래 구성에서 더 멀리 '드리프트'되어 버그 또는 성능 문제를 발견하고 수정하기가 어려워집니다. Terraform은 변경할 수 없는 인프라를 프로비저닝하며, 이는 환경이 변경될 때마다 현재 구성이 변경 사항을 설명하는 새 구성으로 대체되고 인프라가 다시 프로비저닝됨을 의미합니다. 더 좋은 점은 이전 구성을 버전으로 유지하여 필요하거나 원하는 경우 롤백을 활성화할 수 있다는 것입니다.

### Reference

[Terraform 도입기-우아한blog](https://techblog.woowahan.com/2646/)

## Ansible

- 오픈 소스 소프트웨어 프로비저닝, 구성 관리, 애플리케이션 자동화 도구
- SSH를 통해 원격 호스트에 명령을 실행할 수 있도록 지원
- YAML 형식의 플레이북을 사용해 서버 설정을 선언적으로 정의

### Ansible의 주요 특징:

1. 에이전트리스 (Agentless):

- Ansible은 관리 대상 노드에 별도의 에이전트를 설치하지 않아도 됩니다.

2. 멱등성 (Idempotent):

- Ansible은 여러 번 실행해도 같은 결과를 가져오도록 설계되어 있습니다.

3. YAML 기반 플레이북:

- Ansible은 YAML 형식의 플레이북을 사용하여 서버 설정을 정의합니다.

4. 모듈:

- Ansible은 다양한 기능을 수행할 수 있는 모듈을 제공합니다.

5. SSH 기반:

- Ansible은 SSH를 통해 원격 호스트에 접속하여 명령을 실행합니다.

### Ansible의 주요 용도:

- 서버 설정 자동화:

  - Ansible은 서버의 소프트웨어, 사용자, 그룹 등을 설정하는 작업을 자동화할 수 있습니다.

- 인프라 프로비저닝:

  - Ansible은 가상 머신, 클라우드 인스턴스 등을 프로비저닝하는 작업을 자동화할 수 있습니다.

- 구성 관리:

  - Ansible은 서버의 설정을 일관되게 유지하고 관리하는 작업을 자동화할 수 있습니다.

- 애플리케이션 배포:
  - Ansible은 애플리케이션을 서버에 배포하는 작업을 자동화할 수 있습니다.

### Ansible의 구성 요소:

- 노드에 연결한 후 모듈(소규모 프로그램)을 노드로 푸시하는 방식으로 작동
- 노드는 Ansible을 통해 관리하고자 하는 대상 엔드포인트(서버, 네트워크 기기, 기타 컴퓨터)
- 제어 노드 (Control Node): Ansible을 실행하는 노드입니다.
- 관리 노드 (Managed Node): Ansible이 관리하는 대상 호스트입니다.
- 플레이북 (Playbook): Ansible이 실행하는 YAML 형식의 파일입니다.
- 모듈 (Module): Ansible이 특정 작업을 수행하기 위해 사용하는 코드 조각입니다.
- 인벤토리 (Inventory): Ansible이 관리할 호스트 목록을 정의한 파일입니다.

### Ansible의 장점:

- 간편성: Ansible은 배우고 사용하기 쉽습니다.
- 유연성: Ansible은 다양한 환경에 적용할 수 있습니다.
- 확장성: Ansible은 대규모 환경에서도 효율적으로 작동합니다.
- 자동화: Ansible은 수동적인 작업을 자동화하여 효율성을 높입니다.
- 오픈소스: Ansible은 무료로 사용할 수 있습니다.

[Ansible_wikiedocs](https://wikidocs.net/book/6350)

## Terraform과 Kubernetes 비교

때로는 Terraform과 Kubernetes가 수행하는 작업이 혼동되는 경우가 있습니다. 사실 이 둘은 대안이 아니며 함께 효과적으로 작동합니다.

Kubernetes는 개발자가 컴퓨팅 클러스터의 노드에 배포를 예약하고 컨테이너화된 워크로드를 적극적으로 관리하여 상태가 사용자의 의도와 일치하도록 할 수 있는 오픈 소스 컨테이너 오케스트레이션 시스템입니다.

Terraform은 더 광범위한 범위의 코드형 인프라 도구로, 개발자가 여러 퍼블릭 클라우드와 프라이빗 클라우드에 걸쳐 있는 전체 인프라를 자동화할 수 있습니다.

Terraform은 서비스형 인프라(IaaS), 서비스형 플랫폼(PaaS), 심지어 서비스형 소프트웨어(SaaS) 수준의 기능을 자동화 및 관리하고 모든 공급자에서 이러한 모든 리소스를 동시에 구축할 수 있습니다. Terraform을 사용하여 클라우드 플랫폼에서 Kubernetes, 특히 관리되는 Kubernetes 클러스터의 프로비저닝을 자동화하고 클러스터에 애플리케이션을 배포하는 작업을 자동화할 수 있습니다.

## Terraform과 Ansible 비교

Terraform과 Ansible은 모두 코드형 인프라 도구이지만 둘 사이에는 몇 가지 중요한 차이점이 있습니다.

Terraform은 순전히 선언적 도구이지만(위 참조), Ansible은 선언적 구성과 절차적 구성을 모두 결합합니다. 절차적 구성에서는 인프라를 원하는 상태로 프로비저닝하려는 단계 또는 정확한 방식을 지정합니다. 절차적 구성은 더 많은 작업이 필요하지만 더 많은 제어 기능을 제공합니다.

**Terraform은 오픈 소스이며, Ansible은 Red Hat에서 개발 및 판매합니다.**

- [Kubernates -IBM 설명](https://www.ibm.com/kr-ko/topics/kubernetes)
